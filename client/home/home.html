<!-- trang chủ -->

<div class="overview-boxes">
  <div class="box">
    <div class="left-side">
      <div class="box-topic">Số đơn vị quản lý</div>
      <div class="number">0</div>
    </div>
    <i class='bx bxs-bank sticker'></i>
  </div>
  <div class="box">
    <div class="left-side">
      <div class="box-topic">Số đơn vị quản lý trực tiếp</div>
      <div class="number">0</div>
    </div>
    <i class='bx bxs-school sticker'></i>
  </div>
  <div class="box">
    <div class="left-side">
      <div class="box-topic">Dân số quản lý</div>
      <div class="number">5</div>
    </div>
    <i class='bx bxs-user sticker'></i>
  </div>
  <div class="box">
    <div class="left-side">
      <div class="box-topic">Dân số toàn quốc</div>
      <div class="number">5</div>
    </div>
    <i class='bx bxs-group sticker'></i>
  </div>
</div>
<div class="info-boxes">
  <div class="info-list box">
    <div class="title">Danh sách đơn vị quản lý trực tiếp</div>
    <div class="info-details">
      <ul class="details">
        <li class="topic">Mã</li>
        <li><a href="#">24</a></li>
        <li><a href="#">24</a></li>
        <li><a href="#">24</a></li>
        <li><a href="#">24</a></li>
        <li><a href="#">24</a></li>
        <li><a href="#">24</a></li>
        <li><a href="#">24</a></li>
        <li><a href="#">24</a></li>
        <li><a href="#">24</a></li>
        <li><a href="#">24</a></li>
      </ul>
      <ul class="details">
        <li class="topic">Tên</li>
        <li><a href="#">Lào Cai</a></li>
        <li><a href="#">Lào Cai</a></li>
        <li><a href="#">Lào Cai</a></li>
        <li><a href="#">Lào Cai</a></li>
        <li><a href="#">Lào Cai</a></li>
        <li><a href="#">Lào Cai</a></li>
        <li><a href="#">Lào Cai</a></li>
        <li><a href="#">Lào Cai</a></li>
        <li><a href="#">Lào Cai</a></li>
        <li><a href="#">Lào Cai</a></li>
      </ul>
      <ul class="details">
        <li class="topic">Số đơn vị quản lý</li>
        <li><a href="#">09</a></li>
        <li><a href="#">09</a></li>
        <li><a href="#">09</a></li>
        <li><a href="#">09</a></li>
        <li><a href="#">09</a></li>
        <li><a href="#">09</a></li>
        <li><a href="#">09</a></li>
        <li><a href="#">09</a></li>
        <li><a href="#">09</a></li>
        <li><a href="#">09</a></li>
      </ul>
      <ul class="details">
        <li class="topic">Dân số</li>
        <li><a href="#">500</a></li>
        <li><a href="#">500</a></li>
        <li><a href="#">500</a></li>
        <li><a href="#">500</a></li>
        <li><a href="#">500</a></li>
        <li><a href="#">500</a></li>
        <li><a href="#">500</a></li>
        <li><a href="#">500</a></li>
        <li><a href="#">500</a></li>
        <li><a href="#">500</a></li>
      </ul>
    </div>
    <div class="page-rotate-buttons">
      <i class='bx bx-left-arrow'></i>
      <i class='bx bx-right-arrow'></i>
    </div>
  </div>
  <div class="info-list box">
    <div class="title">10 Tỉnh/Thành phố có dân số lớn nhất</div>
    <div class="chart-details">
      <div id="bar_top_x_div" class="Chart"></div>
      <script src="./js/barChart.js"></script>
    </div>
  </div>
</div>

<script>
  $(document).ready(async () => {
    var localAmount = await getLocalCitizenAmount(localStorage.getItem("a_token"));
    var totalAmount = await getTotalCitizenAmount(localStorage.getItem("a_token"));
    $(".overview-boxes .box:nth-child(3) .number").text(localAmount.amount);
    $(".overview-boxes .box:nth-child(4) .number").text(totalAmount.amount);
  });

  async function getLocalCitizenAmount(token) {
    const rawResponse = await fetch("http://localhost:8000/citizen/amount/local", {
      method: "GET",
      headers: {
        "Accept": "application/json",
        "Authorization": `Bearer ${token}`
      }
    });

    return rawResponse.json();
  }

  async function getTotalCitizenAmount(token) {
    const rawResponse = await fetch("http://localhost:8000/citizen/amount", {
      method: "GET",
      headers: {
        "Accept": "application/json",
        "Authorization": `Bearer ${token}`
      }
    });

    return rawResponse.json();
  }
</script>